---
layout: default
---
<script>
var width = 500,
    height = 500,
    n = 10,
    a = width / n,
    h = a * Math.sqrt(3) / 2;

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height)
    .style("background", "#111");

var g = svg.selectAll("g")
    .data(d3.range(-1, 2 * height / h + 1))
    .enter().append("g")
    .attr("transform", function(d) {
        return "translate(" + [(d % 2) * a / 4, d * h / 2] + ")";
    })
    .selectAll("g")
    .data(d3.range(-1, n + 1))
    .enter().append("g")
    .attr("transform", function(d) {
        return "translate(" + [d * a, 0] + ")";
    });

var triangles = g.append("path")
    .attr("fill", "#fff")
    .attr("fill-opacity", 0.33)
    .attr("d", "M" + [0,   -h/2] +
               "L" + [-a/2, h/2] +
               "L" + [+a/2, h/2] + "Z");

(function loop() {
    var t = triangles.transition()
        .delay(function(d) { return d * 20; });

    d3.range(0, 6).forEach(function(k) {
        t = t.transition()
            .duration(1000)
            .attr("transform", "rotate(" + 60 * k + ")");
    });

    setTimeout(loop, 6000);
})();
</script>
